<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Local Citation Network</title>
    <meta name="description" content="This web app aims to help scientists with their literature review using reference data from OpenAlex, Semantic Scholar, OpenCitations and Crossref. It visualizes citation networks defined by the references (and citations) of a given set of Seed Articles, where the Top Cited (and Top Citing) articles are suggested for further review.">
    <meta name="author" content="Tim Woelfle">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="lib/buefy.min.css">
    <script src="lib/vue.min.js"></script>
    <script src="lib/buefy.min.js"></script>
    <script src="lib/vis-network.min.js"></script>
    <style>
      [v-cloak] {
        display: none;
      }
    
      ::-webkit-scrollbar {
          height: 0.4rem;
          width: 0.4rem;
      }

      ::-webkit-scrollbar-thumb {
          background: #999;
          border-radius: 1ex;
      }

      html {
        font-size: 10pt;
        overflow-y: auto;
      }
      
      .retracted, .retracted a {
        background-color: #a00;
        color: #fff;
      }

      .retracted::after {
        content: " (RETRACTED!)"
      }

      /* Flexible height management */
      
      .columns {
        padding: 0;
        margin: 0;
      }
      
      .column, .b-tabs:not(:last-child), .columns:not(:last-child) {
        margin-bottom: 0;
        padding-bottom: 0;
      }
      
      .b-tabs .tab-content {
        padding: 0;
      }
      
      .b-tabs:first-child .tab-content {
        padding-left: 1rem;
      }
      
      div.content {
        padding-top: 0.2rem
      }

      .tab-item {
        height: calc(100vh - 8.5rem);
        overflow-x: hidden;
        overflow-y: auto;
      }
      
      section.hero.is-fullheight {
        min-height: 90vh;
      }
      
      /* Menu */

      li.navbar-item {
        padding: 0.5rem 0.2rem
      }

      .navbar-end button, h2 button, .navbar-end .buttons .button {
        width: 3.8rem
      }

      h2 label.upload {
        display: inline
      }
      
      /* Hoverable h2 tabs */

      li h2.title {
        color: #999999;
      }

      li.is-active h2.title, li h2.title:hover {
        color: #000000;
      }

      /* Table */

      .table th {
        vertical-align: bottom;
      }

      /* Icon replacements */

      .b-table .table tr.is-selected .chevron-cell > a {
        color: #fff !important;
      }

      .mdi-chevron-left:before {
        content: "‚ù∞";
        font-style: normal;
      }

      .mdi-chevron-right:before {
        content: "‚ùØ";
        font-style: normal;
      }

      .mdi-magnify:before {
        content: "üîç";
        font: 1.3em bold sans-serif;
      }

      .mdi-close:before {
        content: "√ó";
        font: 2.3em bold sans-serif;
      }

      /* Vis.js Network tooltip */

      div.vis-tooltip {
        white-space: normal;
        max-width: 20vw;
        word-wrap: break-word;
        padding: 0.5vw;
      }
    </style>
  </head>
  <body>
    <section id="app" v-cloak>
      <b-navbar style="border-bottom: 1px solid #dbdbdb; overflow-x:auto; overflow-y: hidden;">
        <template slot="brand">
          <a class="navbar-item" href="">
            <h1 class="title">{{ (currentGraph?.API === 'Co*Citation Network via OpenAlex' || API === 'Co*Citation Network via OpenAlex') ? 'Co‚ú≤Citation Network' : 'Local Citation Network' }}</h1>
          </a>
        </template>
          
        <template slot="start">
          <ul class="buttons">
            <b-navbar-item tag="li" v-for="item, index in graphs" :key="index" class="navbar-item">
              <b-button :type="(index==currentTabIndex) ? 'is-primary' : ''" :title="item.tabTitle" @click="setCurrentTabIndex(index)" rounded>
                {{ item.tabLabel + ((abbreviateAPI(item.API)) ? ' (' + abbreviateAPI(item.API) + ')' : '') }}
                <a title="Close tab" class="delete" @click.stop="clickCloseTab(index)"></a> <!-- .stop prevents event propagation to parent @click event -->
              </b-button>
            </b-navbar-item>
            <b-navbar-item tag="li">
              <b-button v-if="isLoading" disabled rounded style="width: 12rem">
                <b-progress :value="(isLoadingTotal > 1) ? isLoadingIndex/isLoadingTotal*100 : undefined" size="is-large" show-value format="percent" :precision="0" title="To cancel loading activate 'Save' button on the right and refresh page." style="width: 10rem"></b-progress>
              </b-button>
            </b-navbar-item>
          </ul>
        </template>
          
        <template slot="end">
          <ul class="buttons">
            <b-navbar-item tag="li"><b-button @click="clickButtonAdd" rounded type="is-dark" title="Add network based on references from a single source DOI" :disabled="isLoading"><span style="font-size: 1.8em; line-height: 0.9 ">+</span></b-button></b-navbar-item>
            <b-navbar-item tag="li"><b-upload v-model="file" :disabled="isLoading"><a class="button is-dark is-rounded" title="Scan plain text file for DOIs" :disabled="isLoading" style="margin: 0 0 0.5rem 0"><span style="font-size: 1.2em">File</span></a></b-upload></b-navbar-item>
            <b-navbar-item tag="li"><b-button @click="clickCloseAllTabs" rounded type="is-dark" title="Close all tabs" :disabled="!graphs.length"><span style="font-size: 1.2em">Close</span></b-button></b-navbar-item>
            <b-navbar-item tag="li"><b-button @click="clickToggleAutosave" rounded :type="(autosaveResults) ? '' : 'is-dark'" title="Autosave results locally (only up to 100 References & Citations are kept because of space constraints - if all are needed, use 'download full network: JSON')"><span style="font-size: 1.2em">Save</span></b-button></b-navbar-item>
            <b-navbar-item tag="li"><b-button @click="showOptionsAPI = !showOptionsAPI" rounded type="is-dark" title="API Options: OpenAlex (OA) / Semantic Scholar (S2) / OpenCitations (OC) / Crossref (CR)" :disabled="isLoading"><span  style="font-size: 1.2em">{{ abbreviateAPI(API) }}</span></b-button></b-navbar-item>
            <b-navbar-item tag="li"><b-button @click="showFAQ = !showFAQ" rounded type="is-dark" title="Frequently asked questions"><span style="font-size: 1.8em">?</span></b-button></b-navbar-item>
            <b-navbar-item tag="li"><a @click="indexFAQ = 'contact'; showFAQ = true;" href="#contact" class="button is-dark is-rounded" title="Contact app creator"><span style="font-size: 1.2em">Mail</span></a></b-navbar-item>
          </ul>
        </template>
      </b-navbar>

      <div class="section columns" v-if="currentTabIndex !== undefined">
        <b-tabs v-model="showArticlesTab" :class="'column' + (fullscreenTable ? '' : ' is-three-fifths')" size="is-small" :style="'display: ' + ((fullscreenNetwork) ? 'none' : 'block')">
          <b-tab-item value="seedArticlesTab">
            <template slot="header">
              <h2 class="title is-4">Seed Articles ({{ seedArticles.length }})</h2>
            </template>
            <div class="content">
              <p>
                <a @click="fullscreenTable = !fullscreenTable; if (fullscreenTable) resetBothNetworks(); else initCurrentNetwork();" title="Toggle table fullscreen">{{ (fullscreenTable) ? 'show networks' : 'fullscreen table' }}</a>
                <!-- Make sure network is fully loaded (otherwise citedArticles / citingArticles tabs would show eternal spinning wheels when JSON is reloaded) -->
                <template v-if="citedArticles && citingArticles">
                  / <a @click="showOptionsExportArticles = true">export articles as CSV or RIS</a> /
                  <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                    label="Can be shared and reloaded through the 'File' button at the top right!">
                    <a @click="downloadJSON">download full network as JSON</a>
                  </b-tooltip>
                </template>
              </p>
              <p>
                Seed Articles (‚ÄØ‚è∫‚ÄØ) are based on
                <template v-if="currentGraph.source.id">
                  the
                  <template v-if="currentGraph.source.customListOfReferences">
                    <a v-if="currentGraph.bookmarkletURL" @click="indexFAQ = 'bookmarklet'; showFAQ = true;" href="#bookmarklet">bookmarklet-derived</a>
                    custom list of
                  </template>
                  references of the following source article (‚óÜ):
                </template>
                <template v-else>
                  the following custom list: {{ currentGraph.tabLabel }}
                </template>
              </p>
              <p v-if="currentGraph.source.id">
                <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                  :label="authorString(currentGraph.source.authors)"
                  v-if="currentGraph.source.authors.length > 5">
                  {{ authorStringShort(currentGraph.source.authors) }}.
                </b-tooltip>
                <template v-else>
                  {{ authorStringShort(currentGraph.source.authors) }}.
                </template>
                <a :href="currentGraph.bookmarkletURL || articleLink(currentGraph.source)" target="_blank"><em :class="{ retracted: currentGraph.source.isRetracted }">{{ currentGraph.source.title }}</em></a>. {{ currentGraph.source.journal }}. {{ currentGraph.source.year }}.
                <a @click="selected = seedArticles.filter(x => x.isSource)[0]">(select)</a>
              </p>
              <p>
                Data retrieved through <a @click="indexFAQ = 'switch-api'; showFAQ = true;" href="#switch-api">{{ currentGraph.API + ((abbreviateAPI(currentGraph.API)) ? ' (' + abbreviateAPI(currentGraph.API) + ')' : '') }}</a> on {{ new Date(currentGraph.timestamp).toLocaleString(undefined, {"day": "numeric", "month": "long", "year": "numeric"}) }}
                <b-tooltip dashed multilined type="is-dark" position="is-bottom" :label="completenessLabel" v-if="currentGraph.API !== 'Co*Citation Network via OpenAlex'">
                  <a @click="indexFAQ = 'completeness'; showFAQ = true;" href="#completeness"
                    :style="'color: ' + ((completenessPercent > 40) ? '' : '#ff3860')">
                    (estimated completeness: {{ completenessPercent }}%)
                  </a>
                </b-tooltip>.
                <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                  label="Copy this link's address and share - network data will be retrieved from scratch (Right-click ‚Üí 'Copy Link')">
                  <a :href="linkToShareAppendix" @click="e => e.preventDefault()">Recreate network.</a>
                </b-tooltip>
              </p>
            </div>
            <b-field>
              <b-select v-model="filterColumn">
                <option value="titleAbstract">Title, Abstract, ID</option>
                <option value="authors">Authors</option>
                <option value="year">Year</option>
                <option value="journal">Journal</option>
                <option value="citedById">Cited by ID</option>
                <option value="citingId">Citing ID</option>
              </b-select>
              <b-input v-model="filterString" icon="magnify" placeholder="Filter articles‚Ä¶" expanded
                :icon-right="filterString ? 'close' : undefined"
                icon-right-clickable
                @icon-right-click="filterString=''"></b-input>
              <span class="button is-static" style="border-radius: 0">{{ seedArticlesFiltered.length + " / " + seedArticles.length }}</span>
              <b-select v-model="articlesPerPage">
                <option value="10">10 per page</option>
                <option value="20">20 per page</option>
                <option value="50">50 per page</option>
                <option value="100">100 per page</option>
              </b-select>
            </b-field>
            <b-table ref="seedArticlesTabTable" :data="seedArticlesFiltered" :selected.sync="selectedSeedArticle" :current-page.sync="seedArticlesTabTablePage"
              default-sort="citedCount" default-sort-direction="desc"
              @keyup.native.arrow-left="toggleArticle"
              @keyup.native.arrow-right="toggleArticle"
              @keydown.native.arrow-up.capture="tableArrowUpChangePage"
              @keydown.native.arrow-down.capture="tableArrowDownChangePage"
              detailed :has-detailed-visible="row => (row.authors.length || citedCount(row.id) || citingCount(row.id) || row.abstract || row.tldr)"
              hoverable striped narrowed focusable
              :paginated="seedArticlesFiltered.length > articlesPerPage" :per-page="articlesPerPage" pagination-position="both">
              <template slot="detail" slot-scope="props">
                <p class="content">
                  <b-button v-if="(props.row.referencesCount || props.row.references?.length) && !props.row.isSource" 
                    @click.stop="clickOpenReferences(props.row)"
                    :disabled="isLoading">
                    Add network for references
                  </b-button>
                  <b-button v-if="citedArticles.length && ((currentGraph.allCited) ? (props.row.referencesCount || props.row.references?.length) : citedBySeedArticleId(citedArticles, props.row.id).length)" 
                    @click="showArticlesTab='citedArticlesTab'; filterColumn='citedBySeedArticleId'; filterString=props.row.id">
                    Filter Cited ({{ citedBySeedArticleId(citedArticles, props.row.id).length }})
                  </b-button>
                  <b-button v-if="citingArticles.length && ((currentGraph.allCiting) ? props.row.citationsCount : citesSeedArticleId(citingArticles, props.row.id).length)"
                    @click="showArticlesTab='citingArticlesTab'; filterColumn='citesSeedArticleId'; filterString=props.row.id">
                    Filter Citing ({{ citesSeedArticleId(citingArticles, props.row.id).length }})
                  </b-button>
                  <b-button v-if="citingCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citedById'; filterString=props.row.id">
                    Filter Seed Articles cited by this ({{ citingCount(props.row.id) }})
                  </b-button>
                  <b-button v-if="citedCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citingId'; filterString=props.row.id">
                    Filter Seed Articles citing this ({{ citedCount(props.row.id) }})
                  </b-button>
                </p>
                <p class="content" v-if="props.row.authors.length">
                  <b>Authors ({{ props.row.authors.length }}):</b>
                  <template v-for="(author, index) in props.row.authors">
                    <template v-if="index !== 0">; </template>
                    <b-tooltip
                      multilined
                      type="is-light"
                      :triggers="['click']"
                      :auto-close="['outside', 'escape']">
                      <template v-slot:content>
                        <template v-if="author.affil">{{ author.affil }}<br></template>
                        <a :href="'https://orcid.org/' + author.orcid" v-if="author.orcid" target="_blank">ORCID</a>
                        <a :href="author.url" v-if="author.url" target="_blank">Homepage</a>
                        <a :href="'https://openalex.org/' + author.id" v-if="author.id && currentGraph.API === 'OpenAlex'" target="_blank">OpenAlex</a>
                        <a :href="'https://semanticscholar.org/author/' + author.id" v-if="author.id && currentGraph.API === 'Semantic Scholar'" target="_blank">Semantic Scholar</a>
                        <a :href="'https://scholar.google.com/scholar?q=' + authorString([author])" target="_blank">Google Scholar</a>
                      </template>
                      <a>{{ authorString([author]) }}</a>
                    </b-tooltip>
                  </template>
                </p>
                <p v-if="props.row.tldr"
                  v-html="'<b><a href=&quot;https://www.semanticscholar.org/faq#tldr&quot; target=&quot;_blank&quot; title=&quot;TLDR is an AI-generated summarization provided by Semantic Scholar.&quot;>TLDR: </a></b>' + formatTags(props.row.tldr)"
                  class="content"></p>
                <template v-if="props.row.abstract">
                  <h4 class="title is-6">Abstract</h4>
                  <p v-html="formatTags(props.row.abstract)" class="content"></p>
                </template>
                <template v-if="currentGraph.source.referenceContexts?.[props.row.id]?.length">
                  <h4 class="title is-6">Reference contexts in source article, {{ currentGraph.source.authors[0].LN + ' ' + currentGraph.source.year }} (experimental):</h4>
                  <ul style="list-style-type: disc">
                    <li v-for="context in currentGraph.source.referenceContexts[props.row.id]">{{ context }} -{{ currentGraph.source.authors[0].LN + ' ' + currentGraph.source.year }}</li>
                  </ul>
                </template>
              </template>

              <b-table-column field="numberInSourceReferences" label="#" :meta="currentGraph.source.id ? 'Original reference number in source' : 'Number in custom list'" :visible="showNumberInSourceReferences" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-right" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  {{ (props.row.isSource) ? '' : props.row.numberInSourceReferences }}
                </template>
              </b-table-column>
              <b-table-column label="Title" v-slot="props">
                <!-- id is for scrolling to row when network node is clicked -->
                <span :id="props.row.id" :class="{ retracted: props.row.isRetracted }">
                  {{ (props.row.id === currentGraph.source?.id) ? 'Source: ' : '' }}
                  <a v-if="articleLink(props.row)" :href="articleLink(props.row)" target="_blank" v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></a>
                  <span v-else v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></span>
                </span>
              </b-table-column>
              <b-table-column field="authors" label="Author" v-slot="props">
                <b-tooltip dashed multilined :label="authorString(props.row.authors)" position="is-left" type="is-dark">
                  {{ props.row.authors[0]?.LN }}
                </b-tooltip>
              </b-table-column>
              <b-table-column field="year" label="Year" meta="Hover year to see journal" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip dashed :label="props.row.journal" position="is-left" type="is-dark">
                    {{ props.row.year }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citationsCount" label="Cit." meta="Number of global citations (cited by how many articles in total)" :visible="currentGraph.API !== 'Zotero Cita'" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global citations (cited by how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="citationsLink(props.row)" target="_blank" v-if="citationsLink(props.row)">
                      {{ props.row.citationsCount }}
                    </a>
                    <template v-else>
                      {{ props.row.citationsCount }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Ref." meta="Number of global references (citing how many articles in total)"
                sortable :custom-sort="sortReferencesWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global references (citing how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="referencesLink(props.row)" target="_blank" v-if="referencesLink(props.row)">
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </a>
                    <template v-else>
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citedCount" label="Cited" meta="In-Degree: Cited by how many Seed Articles"
                sortable :custom-sort="sortCitedWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="In-Degree: Cited by how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citedCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citingCount" label="Citing" meta="Out-Degree: Citing how many Seed Articles"
                sortable :custom-sort="sortCitingWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Out-Degree: Citing how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citingCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitedCount" label="Co-Cited" meta="Co-Cited by alongside how many Seed Articles"
                sortable :custom-sort="sortCoCitedWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Cited by alongside how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCited?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitingCount" label="Co-Citing" meta="Co-Citing alongside with how many Seed Articles"
                sortable :custom-sort="sortCoCitingWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Citing alongside with how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCiting?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Rank" meta="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing"
                sortable :custom-sort="sortRankWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing" dashed position="is-left" type="is-dark">
                    {{ rankNumber(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
            </b-table>
          </b-tab-item>

          <!-- Have to use currentGraph.citedArticles === undefined to show progress indicator because the computed always returns [] if undefined -->
          <b-tab-item value="citedArticlesTab" :disabled="currentGraph.citedArticles === undefined" v-if="currentGraph.citedArticles === undefined || citedArticles.length || currentGraph.API === 'Co*Citation Network via OpenAlex'">
            <template slot="header">
              <h2 class="title is-4">
                {{ (currentGraph.allCited) ? 'All ' : ((currentGraph.ricsRankCutoff) ? '' : 'Top ') }}Cited
                (<template v-if="citedArticles.length">{{ citedArticles.length }}</template>
                <b-progress v-else :value="(isLoadingTotal > 1) ? isLoadingIndex/isLoadingTotal*100 : undefined" size="is-medium" show-value format="percent" :precision="0" style="width: 5rem; display: inline-block"></b-progress>)
              </h2>
            </template>
            <div class="content" v-if="citedArticles.length">
              <p>
                <a @click="fullscreenTable = !fullscreenTable; if (fullscreenTable) resetBothNetworks(); else initCurrentNetwork();" title="Toggle table fullscreen">{{ (fullscreenTable) ? 'show networks' : 'fullscreen table' }}</a>
                <!-- Make sure network is fully loaded (otherwise citedArticles / citingArticles tabs would show eternal spinning wheels when JSON is reloaded) -->
                <template v-if="citedArticles && citingArticles">
                  / <a @click="showOptionsExportArticles = true">export articles as CSV or RIS</a> /
                  <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                    label="Can be shared and reloaded through the 'File' button at the top right!">
                    <a @click="downloadJSON">download full network as JSON</a>
                  </b-tooltip>
                </template>
              </p>
              <p>
                Cited Articles (‚ñ≤) are cited by the Seed Articles, i.e., Cited Articles are among the Seed Articles' references. They tend to be older than most Seed Articles. They are derived through <a href="https://doi.org/10.1136/bmj-2023-078384" title="Terminology from: Guidance on terminology, application, and reporting of citation searching: the TARCiS statement" target="_blank">direct backward citation searching</a> (backward in time). They are sorted by the number of Seed Articles they are cited by, with the <a @click="indexFAQ = 'top-cited'; showFAQ = true;" href="#top-cited">Top Cited</a> listed at the top.
                <template v-if="currentGraph.ricsRankCutoff">
                  Ranked (In)Direct Citation Searching (RICS) rank cutoff: {{ currentGraph.ricsRankCutoff }}
                </template>
              </p>
              <p v-if="(currentGraph.API === 'Co*Citation Network via OpenAlex') || (currentGraph.allCited)">
                <a @click="$set(currentGraph, 'deDuplicate', !currentGraph.deDuplicate)">{{ (!currentGraph.deDuplicate) ? 'Currently not de-duplicated against Seed Articles (click to toggle).' : 'Currently de-duplicated against Seed Articles (click to toggle).' }}</a>
              </p>
              <p v-else>
                Top Cited are de-duplicated against Seed Articles.
              </p>
            </div>
            <b-field>
              <b-select v-model="filterColumn">
                <option value="titleAbstract">Title, Abstract, ID</option>
                <option value="authors">Authors</option>
                <option value="year">Year</option>
                <option value="journal">Journal</option>
                <option value="citedBySeedArticleId">Cited by Seed Article ID</option>
              </b-select>
              <b-input v-model="filterString" icon="magnify" placeholder="Filter articles‚Ä¶" expanded
                :icon-right="filterString ? 'close' : undefined"
                icon-right-clickable
                @icon-right-click="filterString=''"></b-input>
              <span class="button is-static" style="border-radius: 0">{{ citedArticlesFiltered.length + " / " + citedArticles.length }}</span>
              <b-select v-model="articlesPerPage">
                <option value="10">10 per page</option>
                <option value="20">20 per page</option>
                <option value="50">50 per page</option>
                <option value="100">100 per page</option>
              </b-select>
            </b-field>
            <b-table ref="citedArticlesTabTable" :data="citedArticlesFiltered" :selected.sync="selectedCitedArticle" :current-page.sync="citedArticlesTabTablePage"
              default-sort="citedCount" default-sort-direction="desc"
              @keyup.native.arrow-left="toggleArticle"
              @keyup.native.arrow-right="toggleArticle"
              @keydown.native.arrow-up.capture="tableArrowUpChangePage"
              @keydown.native.arrow-down.capture="tableArrowDownChangePage"
              detailed hoverable striped narrowed focusable
              :paginated="citedArticlesFiltered.length > articlesPerPage" :per-page="articlesPerPage" pagination-position="both">
              <template slot="detail" slot-scope="props">
                <p class="content">
                  <b-button v-if="(props.row.referencesCount || props.row.references?.length) && !props.row.isSource"
                    @click.stop="clickOpenReferences(props.row)"
                    :disabled="isLoading">
                    Add network for references
                  </b-button>
                  <b-button v-if="citingCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citedById'; filterString=props.row.id">
                    Filter Seed Articles cited by this ({{ citingCount(props.row.id) }})
                  </b-button>
                  <b-button v-if="citedCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citingId'; filterString=props.row.id">
                    Filter Seed Articles citing this ({{ citedCount(props.row.id) }})
                  </b-button>
                </p>
                <p class="content" v-if="props.row.authors.length">
                  <b>Authors ({{ props.row.authors.length }}):</b>
                  <template v-for="(author, index) in props.row.authors">
                    <template v-if="index !== 0">; </template>
                    <b-tooltip
                      multilined
                      type="is-light"
                      :triggers="['click']"
                      :auto-close="['outside', 'escape']">
                      <template v-slot:content>
                        <template v-if="author.affil">{{ author.affil }}<br></template>
                        <a :href="'https://orcid.org/' + author.orcid" v-if="author.orcid" target="_blank">ORCID</a>
                        <a :href="author.url" v-if="author.url" target="_blank">Homepage</a>
                        <a :href="'https://openalex.org/' + author.id" v-if="author.id && currentGraph.API === 'OpenAlex'" target="_blank">OpenAlex</a>
                        <a :href="'https://semanticscholar.org/author/' + author.id" v-if="author.id && currentGraph.API === 'Semantic Scholar'" target="_blank">Semantic Scholar</a>
                        <a :href="'https://scholar.google.com/scholar?q=' + authorString([author])" target="_blank">Google Scholar</a>
                      </template>
                      <a>{{ authorString([author]) }}</a>
                    </b-tooltip>
                  </template>
                </p>
                <p v-if="props.row.tldr"
                  v-html="'<b><a href=&quot;https://www.semanticscholar.org/faq#tldr&quot; target=&quot;_blank&quot; title=&quot;TLDR is an AI-generated summarization provided by Semantic Scholar.&quot;>TLDR: </a></b>' + formatTags(props.row.tldr)"
                  class="content"></p>
                <template v-if="props.row.abstract">
                  <h4 class="title is-6">Abstract</h4>
                  <p v-html="formatTags(props.row.abstract)" class="content"></p>
                </template>
              </template>
              
              <b-table-column label="Title" v-slot="props">
                <!-- id is for scrolling to row when network node is clicked -->
                <span :id="props.row.id" :class="{ retracted: props.row.isRetracted }">
                  {{ (props.row.id === currentGraph.source?.id) ? 'Source: ' : (seedArticlesIds.includes(props.row.id) ? 'Seed Article: ' : '') }}
                  <a v-if="articleLink(props.row)" :href="articleLink(props.row)" target="_blank" v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></a>
                  <span v-else v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></span>
                </span>
              </b-table-column>
              <b-table-column field="authors" label="Author" v-slot="props">
                <b-tooltip dashed multilined :label="authorString(props.row.authors)" position="is-left" type="is-dark">
                  {{ props.row.authors[0]?.LN }}
                </b-tooltip>
              </b-table-column>
              <b-table-column field="year" label="Year" meta="Hover year to see journal" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip dashed :label="props.row.journal" position="is-left" type="is-dark">
                    {{ props.row.year }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citationsCount" label="Cit." meta="Number of global citations (cited by how many articles in total)" :visible="currentGraph.API !== 'Zotero Cita'" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global citations (cited by how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="citationsLink(props.row)" target="_blank" v-if="citationsLink(props.row)">
                      {{ props.row.citationsCount }}
                    </a>
                    <template v-else>
                      {{ props.row.citationsCount }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Ref." meta="Number of global references (citing how many articles in total)" :visible="currentGraph.API !== 'Zotero Cita'"
                sortable :custom-sort="sortReferencesWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global references (citing how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="referencesLink(props.row)" target="_blank" v-if="referencesLink(props.row)">
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </a>
                    <template v-else>
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citedCount" label="Cited" meta="In-Degree: Cited by how many Seed Articles"
                sortable :custom-sort="sortCitedWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="In-Degree: Cited by how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citedCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citingCount" label="Citing" meta="Out-Degree: Citing how many Seed Articles"
                sortable :custom-sort="sortCitingWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Out-Degree: Citing how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citingCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitedCount" label="Co-Cited" meta="Co-Cited by alongside how many Seed Articles"
                sortable :custom-sort="sortCoCitedWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Cited by alongside how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCited?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitingCount" label="Co-Citing" meta="Co-Citing alongside with how many Seed Articles"
                sortable :custom-sort="sortCoCitingWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Citing alongside with how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCiting?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Rank" meta="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing"
                sortable :custom-sort="sortRankWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing" dashed position="is-left" type="is-dark">
                    {{ rankNumber(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
            </b-table>
          </b-tab-item>

          <!-- Have to use currentGraph.citingArticles === undefined to show progress indicator because the computed always returns [] if undefined -->
          <b-tab-item value="citingArticlesTab" :disabled="currentGraph.citingArticles === undefined" v-if="currentGraph.citingArticles === undefined || citingArticles.length || currentGraph.API === 'Co*Citation Network via OpenAlex'">
            <template slot="header">
              <h2 class="title is-4">
                {{ (currentGraph.allCiting) ? 'All ' : ((currentGraph.ricsRankCutoff) ? '' : 'Top ') }}Citing
                (<template v-if="citingArticles.length">{{ citingArticles.length }}</template>
                <b-progress v-else :value="(currentGraph.citedArticles === undefined) ? undefined : (isLoadingTotal > 1) ? isLoadingIndex/isLoadingTotal*100 : undefined" size="is-medium" show-value format="percent" :precision="0" style="width: 5rem; display: inline-block"></b-progress>)
              </h2>
            </template>
            <div class="content" v-if="citingArticles.length">
              <p>
                <a @click="fullscreenTable = !fullscreenTable; if (fullscreenTable) resetBothNetworks(); else initCurrentNetwork();" title="Toggle table fullscreen">{{ (fullscreenTable) ? 'show networks' : 'fullscreen table' }}</a>
                <!-- Make sure network is fully loaded (otherwise citedArticles / citingArticles tabs would show eternal spinning wheels when JSON is reloaded) -->
                <template v-if="citedArticles && citingArticles">
                  / <a @click="showOptionsExportArticles = true">export articles as CSV or RIS</a> /
                  <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                    label="Can be shared and reloaded through the 'File' button at the top right!">
                    <a @click="downloadJSON">download full network as JSON</a>
                  </b-tooltip>
                </template>
              </p>
              <p>
                Citing Articles (‚ñº) are citing the Seed Articles, i.e., Citing Articles are among the Seed Articles' citations. They tend to be newer than most Seed Articles. They are derived through <a href="https://doi.org/10.1136/bmj-2023-078384" title="Terminology from: Guidance on terminology, application, and reporting of citation searching: the TARCiS statement" target="_blank">direct forward citation searching</a> (forward in time). They are sorted by the number of Seed Articles they are citing, with the <a @click="indexFAQ = 'top-citing'; showFAQ = true;" href="#top-citing">Top Citing</a> listed at the top.
                <template v-if="currentGraph.ricsRankCutoff">
                  Ranked (In)Direct Citation Searching (RICS) rank cutoff: {{ currentGraph.ricsRankCutoff }}
                </template>
              </p>
              <p v-if="(currentGraph.API === 'Co*Citation Network via OpenAlex') || (currentGraph.allCiting)">
                <a @click="$set(currentGraph, 'deDuplicate', !currentGraph.deDuplicate)">{{ (!currentGraph.deDuplicate) ? 'Currently not de-duplicated against Seed Articles and Cited (click to toggle).' : 'Currently de-duplicated against Seed Articles and Cited (click to toggle).' }}</a>
              </p>
              <p v-else>
                Top Citing are de-duplicated against Seed Articles and Cited.
              </p>
            </div>
            <b-field>
              <b-select v-model="filterColumn">
                <option value="titleAbstract">Title, Abstract, ID</option>
                <option value="authors">Authors</option>
                <option value="year">Year</option>
                <option value="journal">Journal</option>
                <option value="citesSeedArticleId">Citing Seed Article ID</option>
              </b-select>
              <b-input v-model="filterString" icon="magnify" placeholder="Filter articles‚Ä¶" expanded
                :icon-right="filterString ? 'close' : undefined"
                icon-right-clickable
                @icon-right-click="filterString=''"></b-input>
              <span class="button is-static" style="border-radius: 0">{{ citingArticlesFiltered.length + " / " + citingArticles.length }}</span>
              <b-select v-model="articlesPerPage">
                <option value="10">10 per page</option>
                <option value="20">20 per page</option>
                <option value="50">50 per page</option>
                <option value="100">100 per page</option>
              </b-select>
            </b-field>
            <b-table ref="citingArticlesTabTable" :data="citingArticlesFiltered" :selected.sync="selectedCitingArticle" :current-page.sync="citingArticlesTabTablePage"
              default-sort="citingCount" default-sort-direction="desc"
              @keyup.native.arrow-left="toggleArticle"
              @keyup.native.arrow-right="toggleArticle"
              @keydown.native.arrow-up.capture="tableArrowUpChangePage"
              @keydown.native.arrow-down.capture="tableArrowDownChangePage"
              detailed hoverable striped narrowed focusable
              :paginated="citingArticlesFiltered.length > articlesPerPage" :per-page="articlesPerPage" pagination-position="both">
              <template slot="detail" slot-scope="props">
                <p class="content">
                  <b-button v-if="(props.row.referencesCount || props.row.references?.length) && !props.row.isSource"
                    @click.stop="clickOpenReferences(props.row)"
                    :disabled="isLoading">
                    Add network for references
                  </b-button>
                  <b-button v-if="citingCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citedById'; filterString=props.row.id">
                    Filter Seed Articles cited by this ({{ citingCount(props.row.id) }})
                  </b-button>
                  <b-button v-if="citedCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citingId'; filterString=props.row.id">
                    Filter Seed Articles citing this ({{ citedCount(props.row.id) }})
                  </b-button>
                </p>
                <p class="content" v-if="props.row.authors.length">
                  <b>Authors ({{ props.row.authors.length }}):</b>
                  <template v-for="(author, index) in props.row.authors">
                    <template v-if="index !== 0">; </template>
                    <b-tooltip
                      multilined
                      type="is-light"
                      :triggers="['click']"
                      :auto-close="['outside', 'escape']">
                      <template v-slot:content>
                        <template v-if="author.affil">{{ author.affil }}<br></template>
                        <a :href="'https://orcid.org/' + author.orcid" v-if="author.orcid" target="_blank">ORCID</a>
                        <a :href="author.url" v-if="author.url" target="_blank">Homepage</a>
                        <a :href="'https://openalex.org/' + author.id" v-if="author.id && currentGraph.API === 'OpenAlex'" target="_blank">OpenAlex</a>
                        <a :href="'https://semanticscholar.org/author/' + author.id" v-if="author.id && currentGraph.API === 'Semantic Scholar'" target="_blank">Semantic Scholar</a>
                        <a :href="'https://scholar.google.com/scholar?q=' + authorString([author])" target="_blank">Google Scholar</a>
                      </template>
                      <a>{{ authorString([author]) }}</a>
                    </b-tooltip>
                  </template>
                </p>
                <p v-if="props.row.tldr"
                  v-html="'<b><a href=&quot;https://www.semanticscholar.org/faq#tldr&quot; target=&quot;_blank&quot; title=&quot;TLDR is an AI-generated summarization provided by Semantic Scholar.&quot;>TLDR: </a></b>' + formatTags(props.row.tldr)"
                  class="content"></p>
                <template v-if="props.row.abstract">
                  <h4 class="title is-6">Abstract</h4>
                  <p v-html="formatTags(props.row.abstract)" class="content"></p>
                </template>
              </template>

              <b-table-column label="Title" v-slot="props">
                <!-- id is for scrolling to row when network node is clicked -->
                <span :id="props.row.id" :class="{ retracted: props.row.isRetracted }">
                  {{ (props.row.id === currentGraph.source?.id) ? 'Source: ' : (seedArticlesIds.includes(props.row.id) ? 'Seed Article: ' : (citedArticlesIds.includes(props.row.id) ? 'Cited: ' : '')) }}
                  <a v-if="articleLink(props.row)" :href="articleLink(props.row)" target="_blank" v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></a>
                  <span v-else v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></span>
                </span>
              </b-table-column>
              <b-table-column field="authors" label="Author" v-slot="props">
                <b-tooltip dashed multilined :label="authorString(props.row.authors)" position="is-left" type="is-dark">
                  {{ props.row.authors[0]?.LN }}
                </b-tooltip>
              </b-table-column>
              <b-table-column field="year" label="Year" meta="Hover year to see journal" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip dashed :label="props.row.journal" position="is-left" type="is-dark">
                    {{ props.row.year }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citationsCount" label="Cit." meta="Number of global citations (cited by how many articles in total)" :visible="currentGraph.API !== 'Zotero Cita'" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global citations (cited by how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="citationsLink(props.row)" target="_blank" v-if="citationsLink(props.row)">
                      {{ props.row.citationsCount }}
                    </a>
                    <template v-else>
                      {{ props.row.citationsCount }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Ref." meta="Number of global references (citing how many articles in total)"
                sortable :custom-sort="sortReferencesWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global references (citing how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="referencesLink(props.row)" target="_blank" v-if="referencesLink(props.row)">
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </a>
                    <template v-else>
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citedCount" label="Cited" meta="In-Degree: Cited by how many Seed Articles"
                sortable :custom-sort="sortCitedWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="In-Degree: Cited by how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citedCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citingCount" label="Citing" meta="Out-Degree: Citing how many Seed Articles"
                sortable :custom-sort="sortCitingWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Out-Degree: Citing how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citingCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitedCount" label="Co-Cited" meta="Co-Cited by alongside how many Seed Articles"
                sortable :custom-sort="sortCoCitedWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Cited by alongside how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCited?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitingCount" label="Co-Citing" meta="Co-Citing alongside with how many Seed Articles"
                sortable :custom-sort="sortCoCitingWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Citing alongside with how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCiting?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Rank" meta="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing"
                sortable :custom-sort="sortRankWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing" dashed position="is-left" type="is-dark">
                    {{ rankNumber(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
            </b-table>
          </b-tab-item>

          <b-tab-item value="coCitedArticlesTab" v-if="currentGraph.tabLabel.includes('RICS') && currentGraph.API === 'Co*Citation Network via OpenAlex'">
            <template slot="header">
              <h2 class="title is-4">Co-Cited ({{ coCitedArticles.length }})</h2>
            </template>
            <div class="content">
              <p>
                <a @click="fullscreenTable = !fullscreenTable; if (fullscreenTable) resetBothNetworks(); else initCurrentNetwork();" title="Toggle table fullscreen">{{ (fullscreenTable) ? 'show networks' : 'fullscreen table' }}</a>
                <!-- Make sure network is fully loaded (otherwise citedArticles / citingArticles tabs would show eternal spinning wheels when JSON is reloaded) -->
                <template v-if="citedArticles && citingArticles">
                  / <a @click="showOptionsExportArticles = true">export articles as CSV or RIS</a> /
                  <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                    label="Can be shared and reloaded through the 'File' button at the top right!">
                    <a @click="downloadJSON">download full network as JSON</a>
                  </b-tooltip>
                </template>
              </p>
              <p>
                Co-Cited Articles (‚ÄØ‚¨£‚ÄØ) are cited by the same articles as the Seed Articles are cited by. They are derived through 
                <b-tooltip dashed position="is-bottom" type="is-dark" mulitlined append-to-body>
                  <a href="https://doi.org/10.1136/bmj-2023-078384" target="_blank">indirect co-cited citation searching</a>
                  <template v-slot:content>
                    <p>Guidance on terminology, application, and reporting of citation searching: the TARCiS statement</p>
                    <img src="img/Hirt.2024.BMJ.TARCiS.F1.large.jpg" style="width: 476px; height: 605px;">
                  </template>
                </b-tooltip>. They are sorted by the number of Seed Articles they are cited by alongside.
                Ranked (In)Direct Citation Searching (RICS) rank cutoff: {{ currentGraph.ricsRankCutoff }}
              </p>
              <p v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <a @click="$set(currentGraph, 'deDuplicate', !currentGraph.deDuplicate)">{{ (!currentGraph.deDuplicate) ? 'Currently not de-duplicated against Seed Articles, Cited and Citing (click to toggle).' : 'Currently de-duplicated against Seed Articles, Cited and Citing (click to toggle).' }}</a>
              </p>
            </div>
            <b-field>
              <b-select v-model="filterColumn">
                <option value="titleAbstract">Title, Abstract, ID</option>
                <option value="authors">Authors</option>
                <option value="year">Year</option>
                <option value="journal">Journal</option>
                <option value="citedBySeedArticleId">Cited by Seed Article ID</option>
              </b-select>
              <b-input v-model="filterString" icon="magnify" placeholder="Filter articles‚Ä¶" expanded
                :icon-right="filterString ? 'close' : undefined"
                icon-right-clickable
                @icon-right-click="filterString=''"></b-input>
              <span class="button is-static" style="border-radius: 0">{{ coCitedArticlesFiltered.length + " / " + coCitedArticles.length }}</span>
              <b-select v-model="articlesPerPage">
                <option value="10">10 per page</option>
                <option value="20">20 per page</option>
                <option value="50">50 per page</option>
                <option value="100">100 per page</option>
              </b-select>
            </b-field>
            <b-table ref="coCitedArticlesTabTable" :data="coCitedArticlesFiltered" :selected.sync="selectedCoCitedArticle" :current-page.sync="coCitedArticlesTabTablePage"
              default-sort="coCitedCount" default-sort-direction="desc"
              @keyup.native.arrow-left="toggleArticle"
              @keyup.native.arrow-right="toggleArticle"
              @keydown.native.arrow-up.capture="tableArrowUpChangePage"
              @keydown.native.arrow-down.capture="tableArrowDownChangePage"
              detailed hoverable striped narrowed focusable
              :paginated="coCitedArticlesFiltered.length > articlesPerPage" :per-page="articlesPerPage" pagination-position="both">
              <template slot="detail" slot-scope="props">
                <p class="content">
                  <b-button v-if="(props.row.referencesCount || props.row.references?.length) && !props.row.isSource"
                    @click.stop="clickOpenReferences(props.row)"
                    :disabled="isLoading">
                    Add network for references
                  </b-button>
                  <b-button v-if="citingCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citedById'; filterString=props.row.id">
                    Filter Seed Articles cited by this ({{ citingCount(props.row.id) }})
                  </b-button>
                  <b-button v-if="citedCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citingId'; filterString=props.row.id">
                    Filter Seed Articles citing this ({{ citedCount(props.row.id) }})
                  </b-button>
                </p>
                <p class="content" v-if="props.row.authors.length">
                  <b>Authors ({{ props.row.authors.length }}):</b>
                  <template v-for="(author, index) in props.row.authors">
                    <template v-if="index !== 0">; </template>
                    <b-tooltip
                      multilined
                      type="is-light"
                      :triggers="['click']"
                      :auto-close="['outside', 'escape']">
                      <template v-slot:content>
                        <template v-if="author.affil">{{ author.affil }}<br></template>
                        <a :href="'https://orcid.org/' + author.orcid" v-if="author.orcid" target="_blank">ORCID</a>
                        <a :href="author.url" v-if="author.url" target="_blank">Homepage</a>
                        <a :href="'https://openalex.org/' + author.id" v-if="author.id && currentGraph.API === 'OpenAlex'" target="_blank">OpenAlex</a>
                        <a :href="'https://semanticscholar.org/author/' + author.id" v-if="author.id && currentGraph.API === 'Semantic Scholar'" target="_blank">Semantic Scholar</a>
                        <a :href="'https://scholar.google.com/scholar?q=' + authorString([author])" target="_blank">Google Scholar</a>
                      </template>
                      <a>{{ authorString([author]) }}</a>
                    </b-tooltip>
                  </template>
                </p>
                <p v-if="props.row.tldr"
                  v-html="'<b><a href=&quot;https://www.semanticscholar.org/faq#tldr&quot; target=&quot;_blank&quot; title=&quot;TLDR is an AI-generated summarization provided by Semantic Scholar.&quot;>TLDR: </a></b>' + formatTags(props.row.tldr)"
                  class="content"></p>
                <template v-if="props.row.abstract">
                  <h4 class="title is-6">Abstract</h4>
                  <p v-html="formatTags(props.row.abstract)" class="content"></p>
                </template>
              </template>
              
              <b-table-column label="Title" v-slot="props">
                <!-- id is for scrolling to row when network node is clicked -->
                <span :id="props.row.id" :class="{ retracted: props.row.isRetracted }">
                  {{ (props.row.id === currentGraph.source?.id) ? 'Source: ' : (seedArticlesIds.includes(props.row.id) ? 'Seed Article: ' : (citedArticlesIds.includes(props.row.id) ? 'Cited: ' : (citingArticlesIds.includes(props.row.id) ? 'Citing: ' : ''))) }}
                  <a v-if="articleLink(props.row)" :href="articleLink(props.row)" target="_blank" v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></a>
                  <span v-else v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></span>
                </span>
              </b-table-column>
              <b-table-column field="authors" label="Author" v-slot="props">
                <b-tooltip dashed multilined :label="authorString(props.row.authors)" position="is-left" type="is-dark">
                  {{ props.row.authors[0]?.LN }}
                </b-tooltip>
              </b-table-column>
              <b-table-column field="year" label="Year" meta="Hover year to see journal" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip dashed :label="props.row.journal" position="is-left" type="is-dark">
                    {{ props.row.year }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citationsCount" label="Cit." meta="Number of global citations (cited by how many articles in total)" :visible="currentGraph.API !== 'Zotero Cita'" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global citations (cited by how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="citationsLink(props.row)" target="_blank" v-if="citationsLink(props.row)">
                      {{ props.row.citationsCount }}
                    </a>
                    <template v-else>
                      {{ props.row.citationsCount }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Ref." meta="Number of global references (citing how many articles in total)"
                sortable :custom-sort="sortReferencesWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global references (citing how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="referencesLink(props.row)" target="_blank" v-if="referencesLink(props.row)">
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </a>
                    <template v-else>
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citedCount" label="Cited" meta="In-Degree: Cited by how many Seed Articles"
                sortable :custom-sort="sortCitedWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="In-Degree: Cited by how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citedCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citingCount" label="Citing" meta="Out-Degree: Citing how many Seed Articles"
                sortable :custom-sort="sortCitingWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Out-Degree: Citing how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citingCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitedCount" label="Co-Cited" meta="Co-Cited by alongside how many Seed Articles"
                sortable :custom-sort="sortCoCitedWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Cited by alongside how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCited?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitingCount" label="Co-Citing" meta="Co-Citing alongside with how many Seed Articles"
                sortable :custom-sort="sortCoCitingWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Citing alongside with how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCiting?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Rank" meta="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing"
                sortable :custom-sort="sortRankWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing" dashed position="is-left" type="is-dark">
                    {{ rankNumber(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
            </b-table>
          </b-tab-item>

          <b-tab-item value="coCitingArticlesTab" v-if="currentGraph.tabLabel.includes('RICS') && currentGraph.API === 'Co*Citation Network via OpenAlex'">
            <template slot="header">
              <h2 class="title is-4">Co-Citing ({{ coCitingArticles.length }})</h2>
            </template>
            <div class="content">
              <p>
                <a @click="fullscreenTable = !fullscreenTable; if (fullscreenTable) resetBothNetworks(); else initCurrentNetwork();" title="Toggle table fullscreen">{{ (fullscreenTable) ? 'show networks' : 'fullscreen table' }}</a>
                <!-- Make sure network is fully loaded (otherwise citedArticles / citingArticles tabs would show eternal spinning wheels when JSON is reloaded) -->
                <template v-if="citedArticles && citingArticles">
                  / <a @click="showOptionsExportArticles = true">export articles as CSV or RIS</a> /
                  <b-tooltip dashed multilined position="is-bottom" type="is-dark"
                    label="Can be shared and reloaded through the 'File' button at the top right!">
                    <a @click="downloadJSON">download full network as JSON</a>
                  </b-tooltip>
                </template>
              </p>
              <p>
                Co-Citing Articles (‚ÄØ‚¨£‚ÄØ) are citing the same articles as the Seed Articles are citing. They are derived through
                <b-tooltip dashed position="is-bottom" type="is-dark" mulitlined append-to-body>
                  <a href="https://doi.org/10.1136/bmj-2023-078384" target="_blank">indirect co-citing citation searching</a>
                  <template v-slot:content>
                    <p>Guidance on terminology, application, and reporting of citation searching: the TARCiS statement</p>
                    <img src="img/Hirt.2024.BMJ.TARCiS.F1.large.jpg" style="width: 476px; height: 605px;">
                  </template>
                </b-tooltip>. They are sorted by the number of Seed Articles they are citing alongside with.
                Ranked (In)Direct Citation Searching (RICS) rank cutoff: {{ currentGraph.ricsRankCutoff }}
              </p>
              <p v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <a @click="$set(currentGraph, 'deDuplicate', !currentGraph.deDuplicate)">{{ (!currentGraph.deDuplicate) ? 'Currently not de-duplicated against Seed Articles, Cited, Citing and Co-Cited (click to toggle).' : 'Currently de-duplicated against Seed Articles, Cited, Citing and Co-Cited (click to toggle).' }}</a>
              </p>
            </div>
            <b-field>
              <b-select v-model="filterColumn">
                <option value="titleAbstract">Title, Abstract, ID</option>
                <option value="authors">Authors</option>
                <option value="year">Year</option>
                <option value="journal">Journal</option>
                <option value="citedBySeedArticleId">Cited by Seed Article ID</option>
              </b-select>
              <b-input v-model="filterString" icon="magnify" placeholder="Filter articles‚Ä¶" expanded
                :icon-right="filterString ? 'close' : undefined"
                icon-right-clickable
                @icon-right-click="filterString=''"></b-input>
              <span class="button is-static" style="border-radius: 0">{{ coCitingArticlesFiltered.length + " / " + coCitingArticles.length }}</span>
              <b-select v-model="articlesPerPage">
                <option value="10">10 per page</option>
                <option value="20">20 per page</option>
                <option value="50">50 per page</option>
                <option value="100">100 per page</option>
              </b-select>
            </b-field>
            <b-table ref="coCitingArticlesTabTable" :data="coCitingArticlesFiltered" :selected.sync="selectedCoCitingArticle" :current-page.sync="coCitingArticlesTabTablePage"
              default-sort="coCitingCount" default-sort-direction="desc"
              @keyup.native.arrow-left="toggleArticle"
              @keyup.native.arrow-right="toggleArticle"
              @keydown.native.arrow-up.capture="tableArrowUpChangePage"
              @keydown.native.arrow-down.capture="tableArrowDownChangePage"
              detailed hoverable striped narrowed focusable
              :paginated="coCitingArticlesFiltered.length > articlesPerPage" :per-page="articlesPerPage" pagination-position="both">
              <template slot="detail" slot-scope="props">
                <p class="content">
                  <b-button v-if="(props.row.referencesCount || props.row.references?.length) && !props.row.isSource"
                    @click.stop="clickOpenReferences(props.row)"
                    :disabled="isLoading">
                    Add network for references
                  </b-button>
                  <b-button v-if="citingCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citedById'; filterString=props.row.id">
                    Filter Seed Articles cited by this ({{ citingCount(props.row.id) }})
                  </b-button>
                  <b-button v-if="citedCount(props.row.id)"
                    @click="showArticlesTab='seedArticlesTab'; filterColumn='citingId'; filterString=props.row.id">
                    Filter Seed Articles citing this ({{ citedCount(props.row.id) }})
                  </b-button>
                </p>
                <p class="content" v-if="props.row.authors.length">
                  <b>Authors ({{ props.row.authors.length }}):</b>
                  <template v-for="(author, index) in props.row.authors">
                    <template v-if="index !== 0">; </template>
                    <b-tooltip
                      multilined
                      type="is-light"
                      :triggers="['click']"
                      :auto-close="['outside', 'escape']">
                      <template v-slot:content>
                        <template v-if="author.affil">{{ author.affil }}<br></template>
                        <a :href="'https://orcid.org/' + author.orcid" v-if="author.orcid" target="_blank">ORCID</a>
                        <a :href="author.url" v-if="author.url" target="_blank">Homepage</a>
                        <a :href="'https://openalex.org/' + author.id" v-if="author.id && currentGraph.API === 'OpenAlex'" target="_blank">OpenAlex</a>
                        <a :href="'https://semanticscholar.org/author/' + author.id" v-if="author.id && currentGraph.API === 'Semantic Scholar'" target="_blank">Semantic Scholar</a>
                        <a :href="'https://scholar.google.com/scholar?q=' + authorString([author])" target="_blank">Google Scholar</a>
                      </template>
                      <a>{{ authorString([author]) }}</a>
                    </b-tooltip>
                  </template>
                </p>
                <p v-if="props.row.tldr"
                  v-html="'<b><a href=&quot;https://www.semanticscholar.org/faq#tldr&quot; target=&quot;_blank&quot; title=&quot;TLDR is an AI-generated summarization provided by Semantic Scholar.&quot;>TLDR: </a></b>' + formatTags(props.row.tldr)"
                  class="content"></p>
                <template v-if="props.row.abstract">
                  <h4 class="title is-6">Abstract</h4>
                  <p v-html="formatTags(props.row.abstract)" class="content"></p>
                </template>
              </template>
              
              <b-table-column label="Title" v-slot="props">
                <!-- id is for scrolling to row when network node is clicked -->
                <span :id="props.row.id" :class="{ retracted: props.row.isRetracted }">
                  {{ (props.row.id === currentGraph.source?.id) ? 'Source: ' : (seedArticlesIds.includes(props.row.id) ? 'Seed Article: ' : (citedArticlesIds.includes(props.row.id) ? 'Cited: ' : (citingArticlesIds.includes(props.row.id) ? 'Citing: ' : (coCitedArticlesIds.includes(props.row.id) ? 'Co-Cited: ' : '')))) }}
                  <a v-if="articleLink(props.row)" :href="articleLink(props.row)" target="_blank" v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></a>
                  <span v-else v-html="formatTags(props.row.title) || props.row.doi || props.row.id"></span>
                </span>
              </b-table-column>
              <b-table-column field="authors" label="Author" v-slot="props">
                <b-tooltip dashed multilined :label="authorString(props.row.authors)" position="is-left" type="is-dark">
                  {{ props.row.authors[0]?.LN }}
                </b-tooltip>
              </b-table-column>
              <b-table-column field="year" label="Year" meta="Hover year to see journal" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip dashed :label="props.row.journal" position="is-left" type="is-dark">
                    {{ props.row.year }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citationsCount" label="Cit." meta="Number of global citations (cited by how many articles in total)" :visible="currentGraph.API !== 'Zotero Cita'" sortable>
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global citations (cited by how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="citationsLink(props.row)" target="_blank" v-if="citationsLink(props.row)">
                      {{ props.row.citationsCount }}
                    </a>
                    <template v-else>
                      {{ props.row.citationsCount }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Ref." meta="Number of global references (citing how many articles in total)"
                sortable :custom-sort="sortReferencesWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Number of global references (citing how many articles in total)" dashed position="is-left" type="is-dark">
                    <a :href="referencesLink(props.row)" target="_blank" v-if="referencesLink(props.row)">
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </a>
                    <template v-else>
                      {{ props.row.referencesCount || props.row.references?.length }}
                    </template>
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citedCount" label="Cited" meta="In-Degree: Cited by how many Seed Articles"
                sortable :custom-sort="sortCitedWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="In-Degree: Cited by how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citedCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="citingCount" label="Citing" meta="Out-Degree: Citing how many Seed Articles"
                sortable :custom-sort="sortCitingWrapper">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Out-Degree: Citing how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ citingCount(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitedCount" label="Co-Cited" meta="Co-Cited by alongside how many Seed Articles"
                sortable :custom-sort="sortCoCitedWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Cited by alongside how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCited?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column field="coCitingCount" label="Co-Citing" meta="Co-Citing alongside with how many Seed Articles"
                sortable :custom-sort="sortCoCitingWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Co-Citing alongside with how many Seed Articles" dashed position="is-left" type="is-dark">
                    {{ props.row.coCiting?.length }}
                  </b-tooltip>
                </template>
              </b-table-column>
              <b-table-column label="Rank" meta="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing"
                sortable :custom-sort="sortRankWrapper" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">
                <template v-slot:header="{ column }">
                  <b-tooltip :label="column.meta" dashed position="is-left" type="is-dark">
                    {{ column.label }}
                  </b-tooltip>
                </template>
                <template v-slot="props">
                  <b-tooltip label="Rank: Sum of Cited, Citing, Co-Cited, Co-Citing" dashed position="is-left" type="is-dark">
                    {{ rankNumber(props.row.id) }}
                  </b-tooltip>
                </template>
              </b-table-column>
            </b-table>
          </b-tab-item>
        </b-tabs>

        <b-tabs v-model="showAuthorNetwork" class="column" size="is-small" :animated="false" :style="'display: ' + ((fullscreenTable) ? 'none' : 'block')">
          <b-tab-item :loading="true">
            <template slot="header"><h2 class="title is-4">Citation network</h2></template>
            
            <b-loading :is-full-page="false" :active="citationNetworkIsLoading"></b-loading>
            <div id="citationNetwork" style="height: 100%; cursor: pointer;" :loading="true"></div>
            <span style="position:absolute; top: 0; left: 1rem">
              <a @click="fullscreenNetwork = !fullscreenNetwork; setTimeout(function () { citationNetwork.fit() }, 1)" title="Toggle network fullscreen">{{ (fullscreenNetwork) ? 'show tables' : 'fullscreen network' }}</a> /
              <a @click="indexFAQ = 'citation-network'; showFAQ = true;" href="#citation-network">how to read this network</a> /
              <a @click="showCitationNetworkSettings = true">network settings</a> /
              <a @click="$set(currentGraph, 'citationNetworkTurned', !currentGraph.citationNetworkTurned); changeCurrentNetworkSettings()" title="Rotate network 90¬∞">{{ (currentGraph.citationNetworkTurned) ? '‚Ü∫' : '‚Üª'}}</a>
            </span>
            <span style="position:absolute; top: 0; right: 0" v-if="citationNetwork?.layoutEngine.options.hierarchical.enabled">{{ (['LR', 'DU'].includes(citationNetwork?.layoutEngine.options.hierarchical.direction)) ? 'newer' : 'older' }} articles {{ (['LR', 'RL'].includes(citationNetwork?.layoutEngine.options.hierarchical.direction)) ? '‚Üí' : '‚Üë' }}</span>
            <!--<span style="position:absolute; bottom: 0; left: 1rem">
              (seed articles and articles with a minimum rank of
              <select v-model="citationNetworkMinRank" @change="changeCurrentNetworkSettings()">
                <template v-for="val in [...Array(100).keys()].splice(1)">
                  <option :value="val">{{ val }}</option>
                </template>
              </select>
              are shown)
            </span>-->
            <span style="position:absolute; bottom: 0; right: 0" v-if="citationNetwork?.layoutEngine.options.hierarchical.enabled">{{ (['LR', 'DU'].includes(citationNetwork?.layoutEngine.options.hierarchical.direction)) ? 'older' : 'newer' }} articles {{ (['LR', 'RL'].includes(citationNetwork?.layoutEngine.options.hierarchical.direction)) ? '‚Üê' : '‚Üì' }}</span>
          </b-tab-item>
          <b-tab-item>
            <template slot="header"><h2 class="title is-4">Co-authorship network</h2></template>
            
            <b-loading :is-full-page="false" :active="authorNetworkIsLoading"></b-loading>
            <div id="authorNetwork" style="height: 100%; cursor: pointer;"></div>
            <span style="position:absolute; top: 0; left: 1rem">
              <a @click="fullscreenNetwork = !fullscreenNetwork; setTimeout(function () { authorNetwork.fit() }, 1)" title="Toggle network fullscreen">{{ (fullscreenNetwork) ? 'show tables' : 'fullscreen network' }}</a> /
              <a @click="indexFAQ = 'author-network'; showFAQ = true;" href="#author-network">how to read this network</a> /
              <a @click="showAuthorNetworkSettings = true">network settings</a>
            </span>
            <span style="position:absolute; bottom: 0; left: 1rem">
              (only authors with a minimum of
              <select v-model="authorNetworkMinPublications" @change="changeCurrentNetworkSettings()">
                <template v-for="val in [...Array(seedArticles.length+1).keys()].splice(1)">
                  <option :value="val">{{ val }}</option>
                </template>
              </select>
              seed articles are shown)
            </span>
          </b-tab-item>
        </b-tabs>
      </div>
      
      <section class="hero is-fullheight" v-show="currentTabIndex === undefined">
        <div class="hero-body">
          <div class="container has-text-centered">
            <b-loading :active.sync="isLoading"></b-loading>
            <h2 class="title">
              Click <b-button @click="clickButtonAdd" rounded type="is-dark" title="Add network based on references from a single source DOI" :disabled="isLoading" style="width: 3.5rem"><span style="font-size: 1.8em; line-height: 0.9">+</span></b-button> to enter source DOI<br>or scan a plain text file for DOIs instead <b-upload v-model="file" :disabled="isLoading"><a class="button is-dark is-rounded" title="Scan plain text file for DOIs" :disabled="isLoading" style="width: 3.5rem"><span style="font-size: 1.2em; font-weight: normal">File</span></a></b-upload>!
            </h2>
            (<a @click="loadGraphsFromJSON('examples.json')">Load examples</a> or see <a @click="showFAQ=true">Frequently asked questions</a>)
          </div>
        </div>
      </section>
      
      <b-modal :active.sync="showCitationNetworkSettings" :render-on-mounted="true" :destroy-on-hide="false" :width="750" id="citationNetworkSettingsModal">
        <div class="card">
          <header class="modal-card-head">
            <content>
              <h3 class="modal-card-title">Citation network settings</h3>
            </content>
          </header>
          <div class="card-content">
            <b-field grouped>
              <b-field label="Node color" label-position="on-border">
                <b-select v-model="citationNetworkNodeColor" @input="changeCurrentNetworkSettings()">
                  <option value="year">Year</option>
                  <option value="journal">Journal</option>
                </b-select>
              </b-field>
              <b-field label="Show source article node" label-position="on-border">
                <b-select v-model="citationNetworkShowSource" @input="changeCurrentNetworkSettings()" style="width: 15rem">
                  <option :value="false">No</option>
                  <option :value="true">Yes</option>
                </b-select>
              </b-field>
            </b-field>
            <b-field grouped>
              <b-field label="Min. degree of Cited Articles" label-position="on-border">
                <b-input v-model.lazy="minDegreeCitedArticles" type="number" :min="1" :step="1" 
                  @blur="changeCurrentNetworkSettings()" required style="width: 15rem">
              </b-field>
              <b-field label="Max. number of Cited Articles" label-position="on-border">
                <b-input v-model.lazy="maxCitedArticles" type="number" :min="0" :max="citedArticles.length" :step="1" 
                  @blur="changeCurrentNetworkSettings()" required style="width: 15rem">
              </b-field>
            </b-field>
            <b-field grouped>
              <b-field label="Min. degree of Citing Articles" label-position="on-border">
                <b-input v-model.lazy="minDegreeCitingArticles" type="number" :min="1" :step="1"
                  @blur="changeCurrentNetworkSettings()" required style="width: 15rem">
              </b-field>
              <b-field label="Max. number of Citing Articles" label-position="on-border">
                <b-input v-model.lazy="maxCitingArticles" type="number" :min="0" :max="citingArticles.length" :step="1" 
                  @blur="changeCurrentNetworkSettings()" required style="width: 15rem">
              </b-field>
            </b-field>
            <p class="content">
              The settings below are provided by the <a href="https://visjs.github.io/vis-network/docs/network/" target="_blank">vis.js network library</a> used. They will be saved by using "download full network" and by turning Autosave on ("Save" in the top right). Some settings (including some colors and sizes) do not work properly because they are overwritten by Local Citation Network. Particularly interesting settings are: "layout: hierachical: disable" and "edges: color: inherit: both" (scroll down).
              <a @click="currentGraph.customConfigCitationNetwork = undefined; resetCurrentNetwork(); initCurrentNetwork(); saveState();">
                Click here to reset to default.
              </a>
            </p>
            <div id="citationNetworkConfigure"></div>
          </div>
        </div>
      </b-modal>

      <b-modal :active.sync="showAuthorNetworkSettings" :render-on-mounted="true" :destroy-on-hide="false" :width="750" id="authorNetworkSettingsModal">
        <div class="card">
          <header class="modal-card-head">
            <content>
              <h3 class="modal-card-title">Co-authorship network settings</h3>
            </content>
          </header>
          <div class="card-content">
            <b-field grouped>
              <b-field label="Node color" label-position="on-border">
                <b-select v-model="authorNetworkNodeColor" @input="changeCurrentNetworkSettings()">
                  <option value="firstArticle">First article</option>
                  <option value="lastArticle">Last article</option>
                </b-select>
              </b-field>
              <b-field label="Show first names" label-position="on-border">
                <b-select v-model="authorNetworkFirstNames" @input="changeCurrentNetworkSettings()" style="width: 15rem">
                  <option :value="false">No</option>
                  <option :value="true">Yes</option>
                </b-select>
              </b-field>
            </b-field>
            <p class="content">
              The settings below are provided by the <a href="https://visjs.github.io/vis-network/docs/network/" target="_blank">vis.js network library</a> used. They will be saved by using "download full network" and by turning Autosave on ("Save" in the top right). Some settings (including some colors and sizes) do not work properly because they are overwritten by Local Citation Network.
              <a @click="currentGraph.customConfigAuthorNetwork = undefined; resetCurrentNetwork(); initCurrentNetwork(); saveState();">
                Click here to reset to default.
              </a>
            </p>
            <div id="authorNetworkConfigure"></div>
          </div>
        </div>
      </b-modal>

      <b-modal :active.sync="editListOfIds" :can-cancel="['x', 'outside']" has-modal-card @cancel="newSourceId=undefined; listOfIds=undefined; listName=undefined; bookmarkletURL=undefined">
        <div class="modal-card">
          <header class="modal-card-head">
            <content>
              <h3 class="modal-card-title">Import custom list of IDs</h3>
              <p>One ID per row, usually DOI. Use OpenAlex / Semantic Scholar for PMIDs (with prefix "pmid:"). Empty rows are placeholders in order to help preserve original numbering.</p>
            </content>
          </header>
          <section style="position: relative; height: 50vh">
            <textarea id="rownumber" disabled style="overflow-y: scroll; height: 100%; width: 5rem; text-align: right; position: absolute; padding: 0 1.2rem 0 0; color: grey; resize: none; background-color: white; border: solid 1px white" onscroll="this.scrollTop = document.getElementById('DOIs').scrollTop" v-model="(listOfIds || []).map((x,i)=>i+1).join('\n')"></textarea>
            <textarea id="DOIs" style="height: 100%; width: calc(100% - 4rem); position: absolute; left: 4rem; padding: 0 0.2rem; resize: none; border: solid 1px lightgray" spellcheck="false" onscroll="document.getElementById('rownumber').scrollTop = this.scrollTop" v-model="editedListOfIds"></textarea>
          </section>
          <footer class="modal-card-foot">
            <b-button @click="showOptionsAPI = !showOptionsAPI" style="width: 100%">API: {{ API }} ({{ abbreviateAPI(API) }})</b-button>
            <b-button @click="clickButtonAdd" style="width: 100%">{{ newSourceId ? 'Source: ' + newSourceId.substr(0, 20) : 'No source' }}</b-button>
            <b-button class="is-primary" @click="importList" :disabled="!(listOfIds || []).filter(Boolean).length" style="width: 100%">{{ newSourceId ? 'Import': 'Import with list name: '}}</b-button>
            <b-input v-if="!newSourceId" v-model.lazy="listName" maxlength="100" :has-counter="false" style="width: 100%"></b-input>
          </footer>
        </div>
      </b-modal>

      <b-modal :active.sync="showOptionsAPI" :width="460">
        <div class="card">
          <header class="modal-card-head">
            <content>
              <h3 class="modal-card-title">API options</h3>
            </content>
          </header>
          <div class="card-content">
            <p class="content">
              Cited Articles (References) can be retrieved through all <a @click="indexFAQ = 'switch-api'; showFAQ = true;" href="#switch-api">APIs</a>. Citing Articles (Citations) can be retrieved through OpenAlex (OA), Semantic Scholar (S2) and OpenCitations (OC). <a @click="indexFAQ = 'top-cited'; showFAQ = true;" href="#top-cited">Top Cited</a> are the most cited references by the Seed Articles. <a @click="indexFAQ = 'top-citing'; showFAQ = true;" href="#top-citing">Top Citing</a> are citing the most Seed Articles. Retrieving All Cited (i.e. references) / All Citing (i.e. citations) works best with OpenAlex (OA) & Semantic Scholar (S2).
            </p>
            <b-field grouped>
              <b-field label="Select API">
                <b-select v-model="API" @input="saveState(false)">
                  <option value="OpenAlex">OpenAlex (OA)</option>
                  <option value="Semantic Scholar">Semantic Scholar (S2)</option>
                  <option value="OpenCitations">OpenCitations (OC)</option>
                  <option value="Crossref">Crossref (CR)</option>
                </b-select>
              </b-field>
              <b-field label="Retrieve Cited">
                <b-select v-model="retrieveCitedArticles" @input="saveState(false)">
                  <!--<option :value="0">None</option>-->
                  <option :value="10">Top 10</option>
                  <option :value="20">Top 20</option>
                  <option :value="50">Top 50</option>
                  <option :value="Infinity">All</option>
                </b-select>
              </b-field>
              <b-field label="Retrieve Citing" v-if="API !== 'Crossref'">
                <b-select v-model="retrieveCitingArticles" @input="saveState(false)">
                  <option :value="0">None</option>
                  <option :value="10">Top 10</option>
                  <option :value="20">Top 20</option>
                  <option :value="50">Top 50</option>
                  <option :value="Infinity">All</option>
                </b-select>
              </b-field>
            </b-field>
            <b-field label="Semantic Scholar (S2) API Key:" v-if="API === 'Semantic Scholar'">
              <b-input v-model="semanticScholarAPIKey"></b-input>
            </b-field>
          </div>
        </div>
      </b-modal>

      <b-modal :active.sync="showOptionsExportArticles" :width="460">
        <div class="card">
          <header class="modal-card-head">
            <content>
              <h3 class="modal-card-title">Export options</h3>
            </content>
          </header>
          <div class="card-content">
            <p class="content">
              Articles are de-duplicated, which is why the numbers are not necessarily the same as on the main page.
            </p>
            <b-field><b-checkbox v-model="exportArticles" native-value="seedArticles">Seed Articles ({{ seedArticles?.length }})</b-checkbox></b-field>
            <b-field><b-checkbox v-model="exportArticles" native-value="citedArticlesDeDuplicated">Cited Articles ({{ citedArticlesDeDuplicated?.length }})</b-checkbox></b-field>
            <b-field><b-checkbox v-model="exportArticles" native-value="citingArticlesDeDuplicated">Citing Articles ({{ citingArticlesDeDuplicated?.length }})</b-checkbox></b-field>
            <b-field><b-checkbox v-model="exportArticles" native-value="coCitedArticlesDeDuplicated" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">Co-Cited Articles ({{ coCitedArticlesDeDuplicated?.length }})</b-checkbox></b-field>
            <b-field><b-checkbox v-model="exportArticles" native-value="coCitingArticlesDeDuplicated" v-if="currentGraph.API === 'Co*Citation Network via OpenAlex'">Co-Citing Articles ({{ coCitingArticlesDeDuplicated?.length }})</b-checkbox></b-field>
          </div>
          <footer class="modal-card-foot">
            <b-button type="is-primary" title="Open in spreadsheet editor (e.g. Microsoft Excel)" @click="downloadCSVData(exportArticlesArray)">Download CSV ({{ exportArticlesArray.length }})</b-button>
            <b-button type="is-primary" title="Open in reference manager (e.g. Zotero)" @click="downloadRISData(exportArticlesArray)">Download RIS ({{ exportArticlesArray.length}})</b-button>
          </footer>
        </div>
      </b-modal>

      <b-modal :active.sync="showFAQ" :width="840" scroll="keep">
        <div class="card">
          <div class="card-header-title">
            <content>
              <h3 class="title is-3">Instructions</h3>
              <a @click="indexFAQ = ['about', 'how-to-use', 'bookmarklet', 'top-cited', 'top-citing', 'citation-network', 'author-network', 'switch-api', 'autosave', 'supported-browsers', 'slow-queries', 'completeness', 'original-order', 'bibliometrics', 'google-scholar', 'idea', 'open-source', 'privacy', 'technicalities', 'contact']">open all</a> / 
              <a @click="indexFAQ = []">collapse all</a>
            </content>
          </div>
        
          <b-collapse id="about" :open="indexFAQ.includes('about')" @open="indexFAQ = 'about'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">What is this web app about?</h4>
            </div>
            <div class="card-content content">
              <p>
                This web app aims to help scientists with their literature review using metadata from <a href="https://openalex.org/" target="_blank">OpenAlex</a> (OA), <a href="https://semanticscholar.org/" target="_blank">Semantic Scholar</a> (S2), <a href="https://opencitations.net/" target="_blank">OpenCitations</a> (OC) and <a href="https://crossref.org" target="_blank">Crossref</a> (CR). Academic papers cite one another, thus creating a <a href="https://en.wikipedia.org/wiki/Citation_graph" target="_blank">citation network (= graph)</a>. Each node (= vertex) represents an article and each edge (= link / arrow) represents a reference (outgoing) / citation (incoming). Citation networks are a topic of <a @click="indexFAQ = 'bibliometrics'" href="#bibliometrics">bibliometrics, for which other great software exists as well</a>.
              </p>
              <p>
                This web app visualizes subsets of the global citation network that I call 'local citation networks', defined by the references of a given set of Seed Articles. In addition, the most cited references missing in the set of Seed Articles are suggested for further review as <a @click="indexFAQ = 'top-cited'" href="#top-cited">'Top Cited'</a>. Other missing articles citing the highest number of Seed Articles are <a @click="indexFAQ = 'top-citing'" href="#top-citing">'Top Citing'</a>.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="how-to-use" :open="indexFAQ.includes('how-to-use')" @open="indexFAQ = 'how-to-use'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">How to use this web app?</h4>
            </div>
            <div class="card-content content">
              <p>
                There are basically two ways to create new networks:
              </p>
              <ol>
                <li>Based on the references of a given paper ('source article'). This could be a review or just an interesting paper you'd like to dig into deeper. Either click the + button at the top right and enter the <a href="https://en.wikipedia.org/wiki/Digital_object_identifier" target="_blank">digital object identifier (DOI)</a> of the source article or use the <a @click="indexFAQ = 'bookmarklet'" href="#bookmarklet">bookmarklet described below</a>.</li>
                <li>The second way to create a new network is with a custom list of IDs. Either click the + button at the top right and then 'Enter custom list of IDs instead', or scan a plain text file for DOIs, which allows you to create your own unique lists of Seed Articles. For example, this could be a .ris / .bib file exported by your reference manager (e.g. <a href="https://www.zotero.org/" target="_blank">Zotero</a> or EndNote). In theory, you can scan any plain text file (PDFs and Microsoft Office files don't work). However, due to the multitude of characters allowed in DOIs, the system might not catch all of them correctly (see <a href="https://www.crossref.org/blog/dois-and-matching-regular-expressions/" target="_blank">this blog post by Crossref for more explanation</a>).</li>
              </ol>
              <p>
                Up to 5 tabs can be open at the same time, representing a different local citation network each. Only one query can be processed at a time, which is why some buttons are disabled when a query is still going on. The APIs can return errors when they're overloaded, the reference list is too long or your search frequency too high.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="bookmarklet" :open="indexFAQ.includes('bookmarklet')" @open="indexFAQ = 'bookmarklet'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">How to use the bookmarklet to open references of a paper?</h4>
            </div>
            <div class="card-content content">
              <p>
                A <a href="https://en.wikipedia.org/wiki/Bookmarklet" target="_blank">bookmarklet</a> is a small JavaScript program that can be saved as a bookmark in your browser. This particular bookmarklet allows you to open a new network in Local Citation Network directly when surfing many journals' websites (e.g. Nature, Science, Lancet, ‚Ä¶) with the advantage that the <a @click="indexFAQ = 'original-order'" href="#original-order">original order</a> of references is preserved. Save the following link as a bookmark (e.g. by dragging it to your bookmarks bar) and then click on it when reading an article:
                <b-tooltip dashed position="is-bottom" type="is-dark"
                  label="Right-click ‚Üí 'Bookmark Link'">
                  <a @click="e => e.preventDefault()" href="javascript:(function(){if(!(sourceDOI=document.querySelector('meta[name=\'citation_doi\']')||document.querySelector('meta[name=\'evt-doiPage\']')||document.querySelector('meta[scheme=\'doi\']')||document.querySelector('meta[name=\'prism.doi\']')))return alert('Unfortunately could not extract source DOI.');sourceDOI=sourceDOI.content.toUpperCase(),(lis=document.querySelectorAll('#references-section ul > li')).length||(lis=document.querySelectorAll('ol.c-article-references > li')),lis.length||(lis=document.querySelectorAll('ol.cit-list > li')),lis.length||(lis=document.querySelectorAll('div.References')),lis.length||(lis=document.querySelectorAll('ol#referenceContent > li')),lis.length||(lis=document.querySelectorAll('ol.referenceList > li')),lis.length||(lis=document.querySelectorAll('.ref-list .ref')),lis.length||(lis=document.querySelectorAll('.references > li')),lis.length||(lis=document.querySelectorAll('li.ref')),lis.length||(lis=document.querySelectorAll('table.references tr')),lis.length||(lis=document.querySelectorAll('.footnotes > ol > li')),lis.length||(lis=document.querySelectorAll('.reference')),lis.length||(lis=document.querySelectorAll('#bibliography .citation')),lis.length||(lis=document.querySelectorAll('ol#top-cited-list-1 > li')),lis.length||(lis=document.querySelectorAll('.text-base-md-lh div.reference-container')),(listOfReferences=Array.from(lis).map(e=>(id=decodeURIComponent(encodeURIComponent(e.innerHTML)).match(/10\.\d{4,9}\/[-._;()/:A-Z0-9]+[-_()/:A-Z0-9]+/gi))?id&&id.map(e=>e.toUpperCase()).filter(e=>e!==sourceDOI)[0]:((pubmed_a=e.querySelectorAll('a.reference-link:not([href*=\'pmc\'])')).length&&pubmed_a[0].attributes['data-ga-action']?id=pubmed_a[0].attributes['data-ga-action'].value:(a=e.querySelectorAll('a[href*=\'ncbi.nlm.nih.gov\']:not([href*=\'pmc\'])')).length&&(id=a[0].attributes.href.value.match(/\d+/g)[0]),id)?'pmid:'+id:void 0)).length?window.open('https://LocalCitationNetwork.github.io?source='+sourceDOI+'&listOfIds='+listOfReferences.join(',')+'&bookmarkletURL='+document.URL):alert('Unfortunately could not extract references.')}())">
                    Open in Local Citation Network
                  </a>
                </b-tooltip>
              </p>
              <p>
                The bookmarklet is particularly useful when you want to use Local Citation Network as a 'second screen' when you are reading a paper, showing you its references in the correct order and allowing you to view their abstracts and to identify seminal articles as well as additional suggested articles. When using the bookmarklet, the reference list is scanned directly from the website, thus preserving the original order of references.
              </p>
              <p>
                <a href="https://pubmed.ncbi.nlm.nih.gov/" target="_blank">PubMed</a> is also supported by the bookmarklet, giving access to a vast number of biomedical papers. Before clicking the bookmarklet, scroll down on the paper page (e.g. <a href="https://pubmed.ncbi.nlm.nih.gov/16060722/#references" target="_blank">this one</a>) and click "Show all X references". Make sure to use the <a @click="indexFAQ = 'switch-api'" href="#switch-api">OpenAlex (OA) or Semantic Scholar (S2) APIs </a>, as they are supporting PubMed IDs (PMIDs).
              </p>
              <p>
                Unfortunately, not all journals' websites are supported. If you know how to code, check out the <a href="https://github.com/LocalCitationNetwork/LocalCitationNetwork.github.io/blob/master/bookmarklet.js" target="_blank">code of the bookmarklet on GitHub</a> and extend it to support more journals! In this light it might be worth updating the bookmark in your browser from time to time to benefit from possible improvements.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="top-cited" :open="indexFAQ.includes('top-cited')" @open="indexFAQ = 'top-cited'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Where do the 'Top Cited' come from?</h4>
            </div>
            <div class="card-content content">
              <p>
                'Top Cited' are the most cited references by the Seed Articles that are still missing, thus they have high in-degrees. In order to create the local citation network, this web apps attempts to retrieve reference-lists from all Seed Articles (usually some are missed, <a @click="indexFAQ = 'completeness'" href="#completeness">see completeness</a>) and then orders these references by the number of local incoming citations (in-degree, <a @click="indexFAQ = 'citation-network'" href="#citation-network">see network</a>). Some of these references might be among the Seed Articles, depending on how connected they are. However, some of them usually aren't among the Seed Articles and then become 'Top Cited'.
              </p>
              <p>
                Keep in mind that because of the nature of this approach, 'Top Cited' are generally older than the Seed Articles. This can help identifying seminal papers of the field but not newer state-of-the-art research. In order to identify newer articles, see <a @click="indexFAQ = 'top-citing'" href="#top-citing">'Top Citing'</a>.
              </p>
              <p>
                'Top Cited' are derived through <a href="https://doi.org/10.1136/bmj-2023-078384" title="Terminology from: Guidance on terminology, application, and reporting of citation searching: the TARCiS statement" target="_blank">direct backward citation searching</a> (backward in time).
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="top-citing" :open="indexFAQ.includes('top-citing')" @open="indexFAQ = 'top-citing'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Where do the 'Top Citing' come from?</h4>
            </div>
            <div class="card-content content">
              <p>
                'Top Citing' are citing the most Seed Articles, thus they have high out-degrees. They are generally newer than the Seed Articles. Local Citation Network currently supports this feature with the APIs of <a @click="indexFAQ = 'switch-api'" href="#switch-api">OpenAlex (OA), Semantic Scholar (S2) and OpenCitations (OC)</a>.
              </p>
              <p>
                'Top Citing' are derived through <a href="https://doi.org/10.1136/bmj-2023-078384" title="Terminology from: Guidance on terminology, application, and reporting of citation searching: the TARCiS statement" target="_blank">direct forward citation searching</a> (forward in time).
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="citation-network" :open="indexFAQ.includes('citation-network')" @open="indexFAQ = 'citation-network'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">How to read the citation network?</h4>
            </div>
            <div class="card-content content">
              <p>
                Zoom by scrolling and pan by dragging. Each node (= vertex) represents an article. They are ordered by year from top (newer) to bottom (older), with each year colored differently. Alternatively, nodes can also be colored by the article's journal in 'network settings'. The size of the nodes depends on the sum of their 'in-degree', the number of citations the paper received from the Seed Articles, and their 'out-degree', the number of Seed Articles they cite. The local 'in-degree' is not always proportional to the global citation count. Seed Articles are circle-shaped (‚óè), except for the <a @click="indexFAQ = 'how-to-use'" href="#how-to-use">source article (if applicable)</a>, which is diamond-shaped (‚óÜ). Up-pointing triangles (‚ñ≤) represent <a @click="indexFAQ = 'top-cited'" href="#top-cited">'Top Cited'</a>, which are cited by the Seed Articles. Down-pointing triangles (‚ñº) are <a @click="indexFAQ = 'top-citing'" href="#top-citing">'Top Citing'</a>, which are citing the Seed Articles.
              </p>
              <p>
                Each edge (= link / arrow) represents a reference and citation at the same time: They are references (=outgoing citations) for their source nodes and (incoming) citations for their target nodes. Usually papers can only cite older papers, hence edges tend to point downwards (or sidewards for citations of the same year). Technically a citation network is a <a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="_blank">directed acyclic graph</a>.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="author-network" :open="indexFAQ.includes('author-network')" @open="indexFAQ = 'author-network'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">How to read the co-authorship network?</h4>
            </div>
            <div class="card-content content">
              <p>
                This 'local' co-authorship network shows the most common authors among the Seed Articles. Depending on the discipline, the number of (co)authors among a set of multiple articles can quickly rise to the hundreds, which is why this author network only shows authors with a minimum number of Seed Articles (not to be mistaken with their global number of publications, which is usually higher). The default minimum number of Seed Articles is determined so that this network shows no more than 50 authors, but it can be changed with the dropdown at the bottom.
              </p>
              <p>
                Each node (= vertex) represents an author. The size depends on their number of input & suggested articles and the color depends on the first or last article they first appear in. Authors of Seed Articles are circle-shaped (‚óè), except for authors of the <a @click="indexFAQ = 'how-to-use'" href="#how-to-use">source article (if applicable)</a>, who are diamond-shaped (‚óÜ). Click authors to filter articles-tables, ctrl+click to filter for more than one author.
              </p>
              <p>
                Each edge (= link) represents a collaboration between two authors among the source, input and suggested articles, the width indicating the number of collaborations. Click edges to filter input & suggested articles.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="switch-api" :open="indexFAQ.includes('switch-api')" @open="indexFAQ = 'switch-api'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Which APIs are supported and how to switch?</h4>
            </div>
            <div class="card-content content">
              <p>
                Switch the API with the button indicating "OA / S2 / OC / CR" in the top-right menu. All APIs provide <a @click="indexFAQ = 'top-cited'" href="#top-cited">references</a>.
              </p>
              <p>
                <a href="https://openalex.org/rest-api" target="_blank">OpenAlex</a> (OA) is an open source successor of Microsoft Academic, which was discontinued in 01/2022. It is fast, it has <a href="https://www.nature.com/articles/d41586-022-00138-y" target="_blank">high coverage</a>, serves most abstracts and provides <a @click="indexFAQ = 'top-citing'" href="#top-citing">citations</a>. It also serves a flag for retracted papers, which can be seen <a href="?API=OpenAlex&source=10.3390/en14227745">here for example</a> <a href="https://docs.openalex.org/about-the-data/work#is_retracted" target="_blank">(it can be missing though)</a>.
              </p>
              <p>
                <a href="https://semanticscholar.org/product/api" target="_blank">Semantic Scholar</a> (S2) has <a href="https://doi.org/10.18653/v1/N18-3011" target="_blank">high coverage</a>, serves most abstracts and provides <a @click="indexFAQ = 'top-citing'" href="#top-citing">citations</a>. In addition, it allows accurate estimation of the <a @click="indexFAQ = 'completeness'" href="#completeness">reference-list completeness</a>. However, it can be slower and has a <a href="https://semanticscholar.org/product/api" target="_blank">rate limit</a>.
              </p>
              <p>
                The <a href="https://opencitations.net/index/api/v1#/metadata/{dois}" target="_blank">metadata API</a> from <a href="https://opencitations.net" target="_blank">OpenCitations</a> (OC) builds upon Crossref but also features <a @click="indexFAQ = 'top-citing'" href="#top-citing">citations</a>. However, it does not provide abstracts, author information (like affiliation or ORCID) and it is quite slow.
              </p>
              <p>
                <a href="https://www.crossref.org/services/metadata-delivery/rest-api/" target="_blank">Crossref</a> (CR) usually returns reference lists in their <a @click="indexFAQ = 'original-order'" href="#original-order">original order</a> (you can use the <a @click="indexFAQ = 'bookmarklet'" href="#bookmarklet">bookmarklet</a> for other APIs). Also, it allows for an accurate estimation of the <a @click="indexFAQ = 'completeness'" href="#completeness">reference-list completeness</a>, it's usually very fast and can handle fairly large input lists. Crossref is a not-for-profit organization that collects metadata from scholarly journals and publications. However, it does not provide <a @click="indexFAQ = 'top-citing'" href="#top-citing">citations</a>.
              </p>
              <p>Thanks to the formidable <a href="https://i4oc.org/" target="_blank">Initiative for Open Citations (I4OC)</a>, the coverage of all of these services has increased vastly. However, some journals still do not support these ideals - feel free to write them, in case you find one!</p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="autosave" :open="indexFAQ.includes('autosave')" @open="indexFAQ = 'autosave'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">What does 'Autosave results locally' do?</h4>
            </div>
            <div class="card-content content">
              <p>
                When activated, this option caches your recent networks (up to 5 tabs) and your preferred API locally in your browser in the so-called localStorage. When you revisit this web app, you can pick up where you left. When deactivated, this data is deleted. <a @click="indexFAQ = 'privacy'" href="#privacy">See privacy.</a>
              </p>
            </div>
          </b-collapse>
        
          <div class="card-header-title">
            <h3 class="title is-3">Troubleshooting</h3>
          </div>
          <b-collapse class="card" id="supported-browsers" :open="indexFAQ.includes('supported-browsers')" @open="indexFAQ = 'supported-browsers'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">This web app is not working!? Which browsers are supported?</h4>
            </div>
            <div class="card-content content">
              <p>
                I've tested with the current version of Firefox (as of November 2022), but this web app should also run in current versions of Safari, Edge and Chrome. Microsoft Internet Explorer is not supported. This web app is meant for desktop use and not optimized for smartphones, which have only been tested sparsely. I'm a single developer and created this web app in my spare time for free and for fun, so I don't have the time and resources to test all possible devices, web browsers and scenarios. This web app is <a @click="indexFAQ = 'open-source'" href="#open-source">open source</a>, feel free to support it by extending compatibility or optimizing mobile / tablet use! If you find a bug or problem with the newest versions of Firefox / Safari / Edge / Chrome, please <a href="https://github.com/LocalCitationNetwork/LocalCitationNetwork.github.io/issues" target="_blank">report it on GitHub</a> or <a @click="indexFAQ = 'contact'" href="#contact">contact me</a>.
               </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="slow-queries" :open="indexFAQ.includes('slow-queries')" @open="indexFAQ = 'slow-queries'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">The queries have turned very slow!? / How to cancel loading?</h4>
            </div>
            <div class="card-content content">
              <p>
                APIs are public with varying response speeds depending on their overall usage and workload. In addition, they might be throttling individual users (as identified by IP address) when they perform too many queries in a row. Checking your internet connection, only querying what's really important, <a @click="indexFAQ = 'switch-api'" href="#switch-api">switching to another API</a> and trying again later might help!
              </p>
              <p>
                Sometimes (particularly with unstable internet connections) queries seem to run forever. In case you want to cancel loading, activate 'Autosave results locally' (<a @click="indexFAQ = 'autosave'" href="#autosave">see autosave</a>) and refresh the page. You can deactivate autosave afterwards again.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="completeness" :open="indexFAQ.includes('completeness')" @open="indexFAQ = 'completeness'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Is the data complete? / Some references are missing!?</h4>
            </div>
            <div class="card-content content">
              <p>
                The data is usually incomplete. Some DOIs cannot be found at all in some APIs and for those that are found, often some metadata like authors, abstracts or reference-lists are missing or sometimes incorrect. For the local citation network and 'Top Cited', the completeness of the reference-lists is most important.
              </p>
              <p>
                The estimated completeness of the reference-lists can be seen above the search bar in the "Seed Articles" tab and is calculated in the following way: For OpenAlex and OpenCitations it is the fraction of Seed Articles that have reference-lists themselves (multiplied by the fraction of specified DOIs found, in case of a custom input list).
              </p>
              <p>
                Semantic Scholar and Crossref allow for more subtle calculation, as they often also provide the total reference count, which is often larger than the reference-list of DOIs (older references often don't have DOIs and neither do some specific books, papers or conference abstracts). The estimated completeness is thus calculated as the product of three fractions:
              </p>
              <ol>
                <li>Source reference completeness: (Number of Seed Articles found in API) / (Total reference count of source or total number of lines in custom input list)</li>
                <li>(Number of Seed Articles (excluding source) that have reference-lists themselves) / (Number of Seed Articles excluding source)</li>
                <li>Average Seed Articles' reference completeness among those Seed Articles that do have reference-lists: (Length of reference-list) / (Total reference count)</li>
              </ol>
            </div>
          </b-collapse>
          <b-collapse class="card" id="original-order" :open="indexFAQ.includes('original-order')" @open="indexFAQ = 'original-order'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">How can I preserve the original order of references in the Seed Articles list?</h4>
            </div>
            <div class="card-content content">
              <p>
                You can <a @click="indexFAQ = 'bookmarklet'" href="#bookmarklet">use the bookmarklet</a> to open reference lists in their original order. Alternatively, you can use Crossref, which does seem to save the original order of references. See here <a @click="indexFAQ = 'switch-api'" href="#switch-api">how to switch the API used</a>.
              </p>
            </div>
          </b-collapse>

          <div class="card-header-title">
            <h3 class="title is-3">Background</h3>
          </div>
          <b-collapse class="card" id="bibliometrics" :open="indexFAQ.includes('bibliometrics')" @open="indexFAQ = 'bibliometrics'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">What is bibliometrics? What other software can you recommend?</h4>
            </div>
            <div class="card-content content">
              <p>
                Bibliometrics is a part of information science that uses <a href="https://en.wikipedia.org/wiki/Bibliometrics" target="_blank">statistical methods to analyze publications</a>. It emcompasses scientometrics, which is specifically looking at scientific publications, and citation analysis.
              </p>
              <p>
                Nowadays, there are many tools similar in spirit to this one: <a href="http://citationgecko.com/" target="_blank">Citation Gecko</a>, <a href="https://www.connectedpapers.com/" target="_blank">Connected Papers</a>, <a href="https://www.litmaps.co/" target="_blank">Litmaps</a>, <a href="https://inciteful.xyz/" target="_blank">Inciteful</a> and <a href="https://www.researchrabbit.ai/" target="_blank">ResearchRabbit</a>, among others. Aaron Tay has written a blog post in 06/2021 for <a href="https://musingsaboutlibrarianship.blogspot.com/2021/06/playing-devils-adovcate-why-newly.html" target="_blank">comparison</a>.
              </p>
              <p>
                Other great software to help with bibliometric / scientometric analyses include <a href="https://harzing.com/resources/publish-or-perish" target="_blank">Anne-Wil Harzing's Publish or Perish</a>, which allows sophisticated queries of a plethora of APIs including Crossref but also Google Scholar, Scopus and Web of Science. If you're looking to create more complex networks than this web app allows, check out the Leiden University's great <a href="https://www.vosviewer.com/" target="_blank">VOSviewer</a> and <a href="https://www.citnetexplorer.nl/" target="_blank">CitNetExplorer</a>, which allow you to create and customize everything from citation networks to author networks, university networks and journal networks. VOSviewer also allows text mining and co-occurrence networks.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="google-scholar" :open="indexFAQ.includes('google-scholar')" @open="indexFAQ = 'google-scholar'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Why aren't you using Google Scholar?</h4>
            </div>
            <div class="card-content content">
              <p>
                Unfortunately Google Scholar doesn't share their data and discourages webscraping. It doesn't have an API.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="idea" :open="indexFAQ.includes('idea')" @open="indexFAQ = 'idea'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">I have an idea! Can you implement XYZ?</h4>
            </div>
            <div class="card-content content">
              <p>
                It's great to see you're getting involved! While I see numerous ways to extend this project myself, I don't have much time to work on it anymore unfortunately. However, this web app is <a @click="indexFAQ = 'open-source'" href="#open-source">open source</a> and I'd be very happy to see others extend this project! In the meantime, check out <a @click="indexFAQ = 'bibliometrics'" href="#bibliometrics">these great applications</a>, which might already provide what you're looking for.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="open-source" :open="indexFAQ.includes('open-source')" @open="indexFAQ = 'open-source'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">I'd like to contribute! Is this open source and are you looking for help? / Is this on GitHub?</h4>
            </div>
            <div class="card-content content">
              <p>
                Yes, great! This project is open source (GPL-3) and <a href="https://github.com/LocalCitationNetwork/LocalCitationNetwork.github.io" target="_blank">the source can be found on GitHub</a>. I don't have much more time to work on this project, so I'm actively looking for help and contributors. Bugfixes are always welcome but please <a @click="indexFAQ = 'contact'" href="#contact">contact me</a> before any large pull-requests so we can coordinate.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="privacy" :open="indexFAQ.includes('privacy')" @open="indexFAQ = 'privacy'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Does this web app use cookies? What's the privacy policy?</h4>
            </div>
            <div class="card-content content">
              <p>
                No, this web app doesn't use any cookies. No user-tracking or fingerprinting is performed and no usage-data is collected by the author of this web app. Optionally, so-called localStorage can be used to cache results and settings locally when "Autosave results locally" is manually turned on (<a @click="indexFAQ = 'autosave'" href="#autosave">see autosave</a>).
              </p>
              <p>
                This web app is running locally on your computer and only contacts the API servers during runtime. Crossref has a <a href="https://www.crossref.org/privacy/" target="_blank">general privacy statement</a>. This web app is hosted by GitHub pages, see their <a href="https://help.github.com/en/github/site-policy/github-privacy-statement#github-pages" target="_blank">privacy statement here</a>.
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="technicalities" :open="indexFAQ.includes('technicalities')" @open="indexFAQ = 'technicalities'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Technicalities: Which JavaScript libraries are used and why no CDN?</h4>
            </div>
            <div class="card-content content">
              <p>
                This web app uses <a href="https://vuejs.org/" target="_blank">Vue.js</a>, <a href="https://buefy.org/" target="_blank">Buefy</a> and <a href="https://visjs.org/" target="_blank">vis.js Network</a>. I opted against using content delivery networks (CDN) to speed up delivery of these JavaScript libraries and thus initial loading-time, because of the <a href="https://en.wikipedia.org/wiki/Content_delivery_network#Security_and_privacy" target="_blank">potential user-tracking by CDNs</a>. If you're interested, this rising problem is partly countered by the great browser-plugin <a href="https://decentraleyes.org/" target="_blank">Decentraleyes</a> (<a href="https://git.synz.io/Synzvato/decentraleyes/wikis/Frequently-Asked-Questions" target="_blank">see their FAQ</a> for more details).
              </p>
            </div>
          </b-collapse>
          <b-collapse class="card" id="contact" :open="indexFAQ.includes('contact')" @open="indexFAQ = 'contact'" animation="none">
            <div slot="trigger" slot-scope="props" class="card-header" role="buton">
              <h4 class="card-header-title">Who are you, why did you create this and how can I contact you?</h4>
            </div>
            <div class="card-content content">
              <p>
                I'm Tim W√∂lfle from Germany and started creating this project 2019 during the literature review for my Master's thesis. I've often manually scanned reference lists of papers to identify seminal articles and thought this must be automized. You can contact me on <a href="https://twitter.com/timwoelfle" target="_blank">Twitter</a> or by <a href="mailto:local-citation-network@timwoelfle.de">e-mail</a>.
              </p>
            </div>
          </b-collapse>
        </div>
      </b-modal>
    </section>

    <script>
      if ((!!window.MSInputMethodContext && !!document.documentMode) || navigator.userAgent.indexOf('MSIE') !== -1 || navigator.userAgent.indexOf('Edge') !== -1) {
        window.alert('Unfortunately, this web app does not support Microsoft Internet Explorer. Please use current Firefox, Safari, Edge (>2020), or Chrome.')
      }
    </script>
    <script src="index.js"></script>
  </body>
</html>
